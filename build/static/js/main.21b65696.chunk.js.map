{"version":3,"sources":["Profile.js","Signin.js","SignBar.js","TopBar.js","SigninCover.js","Message.js","ChatRoom.js","ChatRoomBase.js","App.js","index.js"],"names":["avatarFallbackImage","Component","SignBar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","person","name","avatarUrl","anchorElState","e","setState","currentTarget","console","log","_this2","_this$props","userSession","handleSignIn","handleSignOut","_react_16_13_1_react_default","a","createElement","isSignInPending","IconButton","aria-label","aria-controls","aria-haspopup","onClick","handleMenu","color","AccountCircle_default","Menu_Menu","id","anchorEl","keepMounted","open","Boolean","onClose","handleClose","anchorOrigin","vertical","horizontal","getContentAnchorEl","MenuItem","description","bind","Person","loadUserData","profile","TopBar","classes","className","root","AppBar","position","Toolbar","edge","menuButton","Menu_default","Typography","variant","title","isUserSignedIn","SignBar_SignBar","Button","withStyles","theme","flexGrow","signOutButton","marginLeft","spacing","marginRight","SigninCover","Message","newStatus","status","postBoxClicked","statusText","messageList","text","trim","created_at","Date","now","putFile","JSON","stringify","encrypt","then","_this3","getFile","decrypt","file","parse","finally","event","target","value","saveNewStatus","stopPropagation","_this4","_this$props2","Grid","container","justify","item","xs","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","align","ClickAwayListener","onClickAway","handleSubmitClose","TextField","label","onChange","handleNewStatusChange","handlePostBoxClick","placeholder","postBox","submitButton","handleNewStatusSubmit","TableBody","fetchData","width","maxWidth","content","padding","appConfig","AppConfig","UserSession","ChatRoom","preventDefault","redirectToSignIn","signUserOut","window","location","origin","src_TopBar","src_Message","displayMessage","SigninCover_SigninCover","handlePendingSignIn","userData","history","replaceState","document","ChatRoomBase","ReactDOM","render","BrowserRouter","ChatRoom_ChatRoom","getElementById","createRoom","disabled","App","ChatRoomBase_ChatRoomBase","App_App"],"mappings":"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","file":"static/js/main.21b65696.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Person,\n} from 'blockstack';\n\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\n\nexport default class Profile extends Component {\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n  \t  person: {\n  \t  \tname() {\n          return 'Anonymous';\n        },\n  \t  \tavatarUrl() {\n  \t  \t  return avatarFallbackImage;\n  \t  \t},\n  \t  },\n  \t};\n  }\n\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    return (\n      !userSession.isSignInPending() ?\n      <div className=\"panel-welcome\" id=\"section-2\">\n        <div className=\"avatar-section\">\n          <img src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage } className=\"img-rounded avatar\" id=\"avatar-image\" alt=\"\"/>\n        </div>\n        <h1>Hello, <span id=\"heading-name\">{ person.name() ? person.name() : 'Nameless Person' }</span>!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signout-button\"\n            onClick={ handleSignOut.bind(this) }\n          >\n            Logout\n          </button>\n        </p>\n      </div> : null\n    );\n  }\n\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n    });\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Hello, Blockstack!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Sign In with Blockstack\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport {\r\n  Person,\r\n} from 'blockstack';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\n\r\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\r\n\r\n\r\n\r\nexport default class SignBar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      person: {\r\n        name() {\r\n          return 'Anonymous';\r\n        },\r\n        avatarUrl() {\r\n          return avatarFallbackImage;\r\n        },\r\n      },\r\n      anchorElState : null\r\n    }\r\n  }\r\n\r\n  handleMenu (e){\r\n    this.setState({\r\n      anchorElState : e.currentTarget\r\n    })\r\n  };\r\n\r\n  handleClose ()  {\r\n    console.log(\"in handleClose\",this.state.person)\r\n    this.setState({\r\n      anchorElState : null\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const { handleSignIn,userSession,handleSignOut } = this.props;\r\n    const { person } = this.state;\r\n    return (\r\n      <div>\r\n        {!userSession.isSignInPending() ?\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={e => this.handleMenu(e)}\r\n              color=\"inherit\"\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"simple-menu\"\r\n              anchorEl={this.state.anchorElState}\r\n              keepMounted\r\n              open={Boolean(this.state.anchorElState)}\r\n              onClose={e => this.handleClose()}\r\n              anchorOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'center',\r\n              }}\r\n              getContentAnchorEl={null}\r\n            >\r\n              <MenuItem onClick={e => this.handleClose()}><div>用户名称：{person.name()}</div></MenuItem>\r\n              <MenuItem onClick={e => this.handleClose()}><div>用户简介：{person.description()}</div></MenuItem>\r\n              <MenuItem onClick={handleSignOut.bind(this)}>登出</MenuItem>\r\n            </Menu>\r\n          </div>\r\n          : null\r\n\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentWillMount() {\r\n    const { userSession } = this.props;\r\n    this.setState({\r\n      person: new Person(userSession.loadUserData().profile),\r\n    });\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SignBar from './SignBar.js'\r\n\r\nconst useStyles = theme => ({\r\n  root: {\r\n    flexGrow: 1\r\n  },\r\n  signOutButton: {\r\n    marginLeft: theme.spacing(1)\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\nclass TopBar extends Component {\r\n\r\n  render(){\r\n    const { classes } = this.props\r\n    const { userSession,handleSignIn} = this.props;\r\n    return(\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Anonymous Chat\r\n            </Typography>\r\n            {userSession.isUserSignedIn() ?\r\n            <SignBar userSession={this.props.userSession} handleSignIn={ this.props.handleSignIn } handleSignOut={ this.props.handleSignOut }/>\r\n            : <Button onClick={handleSignIn.bind(this)} > Sign In </Button>\r\n            }\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(TopBar)\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nexport default class SigninCover extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n  }\r\n  render() {\r\n    const { handleSignIn } = this.props; \r\n\r\n    return (\r\n      <div >\r\n        <h1>Welcome To The Anonymous Chat</h1>\r\n        <h2>Please Sign In</h2>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\r\n\r\nconst useStyles = theme => ({\r\n  root: {\r\n    width : \"100%\"\r\n  },\r\n  container : {\r\n    maxWidth : 600\r\n  },\r\n  content:{\r\n\r\n  },\r\n  postBox: {\r\n    width : \"100%\",\r\n    padding:theme.spacing(1)\r\n  },\r\n  submitButton:{\r\n    marginRight: theme.spacing(2)\r\n  }\r\n});\r\n\r\n\r\nclass Message extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n\r\n  \tthis.state = {\r\n      newStatus:\"\",\r\n      status:\"\",\r\n      postBoxClicked: false\r\n  \t};\r\n\r\n  }\r\n  saveNewStatus(statusText) {\r\n     const { userSession, messageList } = this.props\r\n\r\n     let status = {\r\n       text: statusText.trim(),\r\n       created_at: Date.now()\r\n     }\r\n\r\n     const options = { encrypt: false }\r\n     userSession.putFile('status.json', JSON.stringify(status), options)\r\n       .then(() => {\r\n        // messageList()\r\n         this.setState({\r\n           newStatus: status.text\r\n         })\r\n       })\r\n  }\r\n  fetchData() {\r\n   const { userSession } = this.props\r\n   const options = { decrypt: false }\r\n   userSession.getFile('status.json', options)\r\n     .then((file) => {\r\n       var status = JSON.parse(file || '[]')\r\n       console.log(status)\r\n       this.setState({\r\n         status:status\r\n       })\r\n     })\r\n     .finally(() => {\r\n       console.log(\"read over\")\r\n     })\r\n  }\r\n  handleNewStatusChange(event) {\r\n    this.setState({newStatus: event.target.value})\r\n  }\r\n\r\n  handleNewStatusSubmit(event) {\r\n    this.saveNewStatus(this.state.newStatus)\r\n    this.setState({\r\n      newStatus: \"\"\r\n    })\r\n  }\r\n\r\n  handlePostBoxClick(event) {\r\n    console.log(this)\r\n    event.stopPropagation()\r\n    this.setState({\r\n      postBoxClicked:true\r\n    })\r\n  }\r\n\r\n  handleSubmitClose(){\r\n    this.setState({\r\n      postBoxClicked:false\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    const { handleSignOut, userSession } = this.props;\r\n\r\n    const { classes } = this.props;\r\n    return (\r\n      !userSession.isSignInPending() ?\r\n        <Grid container className={classes.root} justify=\"center\" >\r\n          <Grid container className={classes.container} spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TableContainer component={Paper}>\r\n                <Table>\r\n                  <TableHead>\r\n                    <TableRow >\r\n                      <TableCell>\r\n                        <div align=\"center\">\r\n                          <ClickAwayListener onClickAway={e=>this.handleSubmitClose(e)}>\r\n                            <TextField\r\n                                     id=\"outlined-basic\"\r\n                                     label=\"新留言\"\r\n                                     value={this.state.newStatus}\r\n                                     onChange={e => this.handleNewStatusChange(e)}\r\n                                     onClick={e => this.handlePostBoxClick(e)}\r\n                                     placeholder=\"输入留言信息\"\r\n                                     className={classes.postBox}\r\n                                     variant=\"outlined\"\r\n\r\n                             />\r\n                          </ClickAwayListener>\r\n                        </div>\r\n                        {this.state.postBoxClicked?\r\n                        <div align=\"right\" className={classes.submitButton}>\r\n                             <Button\r\n                                     onClick={e => this.handleNewStatusSubmit(e)}\r\n                                     variant=\"contained\"\r\n                                     color=\"primary\"\r\n                                     >\r\n                                     提交\r\n                             </Button>\r\n                        </div> : null\r\n                        }\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n\r\n\r\n                  <TableBody>\r\n                    { this.state.status == \"\"? null :\r\n                      <TableRow>\r\n                        <TableCell align=\"center\">{this.state.status.text}</TableCell>\r\n                      </TableRow>\r\n                    }\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      : null\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    this.fetchData()\r\n  }\r\n\r\n}\r\n\r\nexport default withStyles(useStyles)(Message);\r\n","import React, { Component } from 'react';\r\nimport Profile from './Profile.js';\r\nimport Signin from './Signin.js';\r\nimport TopBar from './TopBar.js'\r\nimport SigninCover from './SigninCover.js';\r\nimport Message from './Message.js'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {\r\n  UserSession,\r\n  AppConfig\r\n} from 'blockstack';\r\n\r\nconst appConfig = new AppConfig()\r\nconst userSession = new UserSession({ appConfig: appConfig })\r\n\r\nexport default class ChatRoom extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n\r\n  \tthis.state = {\r\n      messageList:{},\r\n  \t};\r\n\r\n  }\r\n\r\n  handleSignIn(e) {\r\n    e.preventDefault();\r\n    userSession.redirectToSignIn();\r\n  }\r\n\r\n  handleSignOut(e) {\r\n    e.preventDefault();\r\n    userSession.signUserOut(window.location.origin);\r\n  }\r\n\r\n  displayMessage(){\r\n\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div>\r\n        <TopBar userSession={userSession} handleSignIn={ this.handleSignIn } handleSignOut={ this.handleSignOut }/>\r\n        <div className=\"site-wrapper\">\r\n          <div className=\"site-wrapper-inner\">\r\n            { !userSession.isUserSignedIn() ?\r\n              <SigninCover userSession={userSession} />\r\n              : <Grid container className=\"ChartRoom\" justify=\"center\" >\r\n                  <Message userSession={userSession} handleSignOut={ this.handleSignOut } messageList={this.displayMessage}/>\r\n                </Grid>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (userSession.isSignInPending()) {\r\n      userSession.handlePendingSignIn().then((userData) => {\r\n        window.history.replaceState({}, document.title, \"/\")\r\n        this.setState({ userData: userData})\r\n      });\r\n    }\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport Button from '@material-ui/core/Button';\r\nimport App from './App.js';\r\nimport ChatRoom from './ChatRoom.js'\r\n\r\nexport default class ChatRoomBase extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n  \r\n        this.state = {\r\n          person: {\r\n              name() {\r\n            return 'Anonymous';\r\n          },\r\n              avatarUrl() {\r\n                return 'Anonymous';\r\n              },\r\n          },\r\n        };\r\n    }\r\n    createRoom() {\r\n        ReactDOM.render(<BrowserRouter><ChatRoom/></BrowserRouter>, document.getElementById('root'));\r\n    }\r\n    render() {\r\n        const { handleSignOut, userSession } = this.props;\r\n        return (\r\n            <div>\r\n                <Button \r\n                    className=\"create_meeting\" \r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                    onClick={this.createRoom}\r\n                >\r\n                    Create  Meeting\r\n                </Button>\r\n                <Button \r\n                    className=\"join_meeting\" \r\n                    variant=\"contained\" \r\n                    color=\"primary\"\r\n                    disabled\r\n                >\r\n                    Join  Meeting\r\n                </Button>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react';\nimport Profile from './Profile.js';\nimport Signin from './Signin.js';\nimport TopBar from './TopBar.js'\nimport SigninCover from './SigninCover.js';\nimport ChatRoomBase from './ChatRoomBase.js';\nimport {\n  UserSession,\n  AppConfig\n} from 'blockstack';\n\nconst appConfig = new AppConfig()\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div>\n        <TopBar userSession={userSession} handleSignIn={ this.handleSignIn } handleSignOut={ this.handleSignOut }/>\n        <div className=\"site-wrapper\">\n          <div className=\"site-wrapper-inner\">\n            { !userSession.isUserSignedIn() ?\n              <SigninCover userSession={userSession} />\n              : <ChatRoomBase userSession={userSession} />\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}