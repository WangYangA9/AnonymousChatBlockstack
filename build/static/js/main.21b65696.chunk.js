(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{298:function(e,t,n){e.exports=n(580)},315:function(e,t){},317:function(e,t){},333:function(e,t){},335:function(e,t){},501:function(e,t){},579:function(e,t,n){},580:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(14),r=n.n(s),o=n(643),l=n(18),c=n(19),u=n(24),h=n(23),m=n(25),d=n(47),p="https://s3.amazonaws.com/onename/avatar-placeholder.png",g=(a.Component,a.Component,n(630)),S=n(631),f=n(632),v=n(633),E=n(626),O=n(182),b=n.n(O),y=n(5),C=n(286),k=n.n(C),w=n(644),j=n(288),I="https://s3.amazonaws.com/onename/avatar-placeholder.png",N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return I}},anchorElState:null},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleMenu",value:function(e){this.setState({anchorElState:e.currentTarget})}},{key:"handleClose",value:function(){console.log("in handleClose",this.state.person),this.setState({anchorElState:null})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.handleSignIn,t.userSession),a=t.handleSignOut,s=this.state.person;return i.a.createElement("div",null,n.isSignInPending()?null:i.a.createElement("div",null,i.a.createElement(E.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){return e.handleMenu(t)},color:"inherit"},i.a.createElement(k.a,null)),i.a.createElement(j.a,{id:"simple-menu",anchorEl:this.state.anchorElState,keepMounted:!0,open:Boolean(this.state.anchorElState),onClose:function(t){return e.handleClose()},anchorOrigin:{vertical:"bottom",horizontal:"center"},getContentAnchorEl:null},i.a.createElement(w.a,{onClick:function(t){return e.handleClose()}},i.a.createElement("div",null,"\u7528\u6237\u540d\u79f0\uff1a",s.name())),i.a.createElement(w.a,{onClick:function(t){return e.handleClose()}},i.a.createElement("div",null,"\u7528\u6237\u7b80\u4ecb\uff1a",s.description())),i.a.createElement(w.a,{onClick:a.bind(this)},"\u767b\u51fa"))))}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new d.Person(e.loadUserData().profile)})}}]),t}(a.Component),x=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props,n=t.userSession,a=t.handleSignIn;return i.a.createElement("div",{className:e.root},i.a.createElement(g.a,{position:"static"},i.a.createElement(S.a,null,i.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},i.a.createElement(b.a,null)),i.a.createElement(f.a,{variant:"h6",className:e.title},"Anonymous Chat"),n.isUserSignedIn()?i.a.createElement(N,{userSession:this.props.userSession,handleSignIn:this.props.handleSignIn,handleSignOut:this.props.handleSignOut}):i.a.createElement(v.a,{onClick:a.bind(this)}," Sign In "))))}}]),t}(a.Component),B=Object(y.a)(function(e){return{root:{flexGrow:1},signOutButton:{marginLeft:e.spacing(1)},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})(x),D=function(e){function t(e){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.props.handleSignIn;return i.a.createElement("div",null,i.a.createElement("h1",null,"Welcome To The Anonymous Chat"),i.a.createElement("h2",null,"Please Sign In"))}}]),t}(a.Component),M=n(642),P=n(634),U=n(582),A=n(636),J=n(641),R=n(639),T=n(635),L=n(637),z=n(638),W=n(640),_=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={newStatus:"",status:"",postBoxClicked:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"saveNewStatus",value:function(e){var t=this,n=this.props,a=n.userSession,i=(n.messageList,{text:e.trim(),created_at:Date.now()});a.putFile("status.json",JSON.stringify(i),{encrypt:!1}).then(function(){t.setState({newStatus:i.text})})}},{key:"fetchData",value:function(){var e=this;this.props.userSession.getFile("status.json",{decrypt:!1}).then(function(t){var n=JSON.parse(t||"[]");console.log(n),e.setState({status:n})}).finally(function(){console.log("read over")})}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(this.state.newStatus),this.setState({newStatus:""})}},{key:"handlePostBoxClick",value:function(e){console.log(this),e.stopPropagation(),this.setState({postBoxClicked:!0})}},{key:"handleSubmitClose",value:function(){this.setState({postBoxClicked:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.handleSignOut,t.userSession),a=this.props.classes;return n.isSignInPending()?null:i.a.createElement(P.a,{container:!0,className:a.root,justify:"center"},i.a.createElement(P.a,{container:!0,className:a.container,spacing:2},i.a.createElement(P.a,{item:!0,xs:12},i.a.createElement(T.a,{component:U.a},i.a.createElement(A.a,null,i.a.createElement(L.a,null,i.a.createElement(z.a,null,i.a.createElement(R.a,null,i.a.createElement("div",{align:"center"},i.a.createElement(W.a,{onClickAway:function(t){return e.handleSubmitClose(t)}},i.a.createElement(M.a,{id:"outlined-basic",label:"\u65b0\u7559\u8a00",value:this.state.newStatus,onChange:function(t){return e.handleNewStatusChange(t)},onClick:function(t){return e.handlePostBoxClick(t)},placeholder:"\u8f93\u5165\u7559\u8a00\u4fe1\u606f",className:a.postBox,variant:"outlined"}))),this.state.postBoxClicked?i.a.createElement("div",{align:"right",className:a.submitButton},i.a.createElement(v.a,{onClick:function(t){return e.handleNewStatusSubmit(t)},variant:"contained",color:"primary"},"\u63d0\u4ea4")):null))),i.a.createElement(J.a,null,""==this.state.status?null:i.a.createElement(z.a,null,i.a.createElement(R.a,{align:"center"},this.state.status.text))))))))}},{key:"componentDidMount",value:function(){this.fetchData()}}]),t}(a.Component),F=Object(y.a)(function(e){return{root:{width:"100%"},container:{maxWidth:600},content:{},postBox:{width:"100%",padding:e.spacing(1)},submitButton:{marginRight:e.spacing(2)}}})(_),G=new d.AppConfig,q=new d.UserSession({appConfig:G}),H=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={messageList:{}},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),q.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),q.signUserOut(window.location.origin)}},{key:"displayMessage",value:function(){}},{key:"render",value:function(){this.props.classes;return i.a.createElement("div",null,i.a.createElement(B,{userSession:q,handleSignIn:this.handleSignIn,handleSignOut:this.handleSignOut}),i.a.createElement("div",{className:"site-wrapper"},i.a.createElement("div",{className:"site-wrapper-inner"},q.isUserSignedIn()?i.a.createElement(P.a,{container:!0,className:"ChartRoom",justify:"center"},i.a.createElement(F,{userSession:q,handleSignOut:this.handleSignOut,messageList:this.displayMessage})):i.a.createElement(D,{userSession:q}))))}},{key:"componentDidMount",value:function(){var e=this;q.isSignInPending()&&q.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(a.Component),K=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return"Anonymous"}}},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"createRoom",value:function(){r.a.render(i.a.createElement(o.a,null,i.a.createElement(H,null)),document.getElementById("root"))}},{key:"render",value:function(){var e=this.props;e.handleSignOut,e.userSession;return i.a.createElement("div",null,i.a.createElement(v.a,{className:"create_meeting",variant:"contained",color:"primary",onClick:this.createRoom},"Create  Meeting"),i.a.createElement(v.a,{className:"join_meeting",variant:"contained",color:"primary",disabled:!0},"Join  Meeting"))}}]),t}(a.Component),Q=new d.AppConfig,V=new d.UserSession({appConfig:Q}),X=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),V.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),V.signUserOut(window.location.origin)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(B,{userSession:V,handleSignIn:this.handleSignIn,handleSignOut:this.handleSignOut}),i.a.createElement("div",{className:"site-wrapper"},i.a.createElement("div",{className:"site-wrapper-inner"},V.isUserSignedIn()?i.a.createElement(K,{userSession:V}):i.a.createElement(D,{userSession:V}))))}},{key:"componentDidMount",value:function(){var e=this;V.isSignInPending()&&V.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(a.Component);n(578),n(579);r.a.render(i.a.createElement(o.a,null,i.a.createElement(X,null)),document.getElementById("root"))}},[[298,1,2]]]);
//# sourceMappingURL=main.21b65696.chunk.js.map